import{Q as V}from"./QResizeObserver.b689e35a.js";import{c as B,d as K,h as N,a as U}from"./render.5cb39278.js";import{k as w,r as h,c as r,w as p,l as E,h as f,a as W,p as F,g as O,K as _,L as I,M,N as x,b as j}from"./index.f77587b2.js";import{Q as k}from"./QScrollObserver.071cee54.js";import{g as P}from"./scroll.60c14bbd.js";var Y=B({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:z,emit:v}){const{proxy:{$q:a}}=O(),o=W(F,w);if(o===w)return console.error("QHeader needs to be child of QLayout"),w;const l=h(parseInt(t.heightHint,10)),u=h(!0),b=r(()=>t.reveal===!0||o.view.value.indexOf("H")>-1||a.platform.is.ios&&o.isContainer.value===!0),m=r(()=>{if(t.modelValue!==!0)return 0;if(b.value===!0)return u.value===!0?l.value:0;const e=l.value-o.scroll.value.position;return e>0?e:0}),s=r(()=>t.modelValue!==!0||b.value===!0&&u.value!==!0),q=r(()=>t.modelValue===!0&&s.value===!0&&t.reveal===!0),L=r(()=>"q-header q-layout__section--marginal "+(b.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),Q=r(()=>{const e=o.rows.value.top,d={};return e[0]==="l"&&o.left.space===!0&&(d[a.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),e[2]==="r"&&o.right.space===!0&&(d[a.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),d});function c(e,d){o.update("header",e,d)}function g(e,d){e.value!==d&&(e.value=d)}function C({height:e}){g(l,e),c("size",e)}function H(e){q.value===!0&&g(u,!0),v("focusin",e)}p(()=>t.modelValue,e=>{c("space",e),g(u,!0),o.animate()}),p(m,e=>{c("offset",e)}),p(()=>t.reveal,e=>{e===!1&&g(u,t.modelValue)}),p(u,e=>{o.animate(),v("reveal",e)}),p(o.scroll,e=>{t.reveal===!0&&g(u,e.direction==="up"||e.position<=t.revealOffset||e.position-e.inflectionPoint<100)});const S={};return o.instances.header=S,t.modelValue===!0&&c("size",l.value),c("space",t.modelValue),c("offset",m.value),E(()=>{o.instances.header===S&&(o.instances.header=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const e=K(z.default,[]);return t.elevated===!0&&e.push(f("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(f(V,{debounce:0,onResize:C})),f("header",{class:L.value,style:Q.value,onFocusin:H},e)}}}),Z=B({name:"QPageContainer",setup(t,{slots:z}){const{proxy:{$q:v}}=O(),a=W(F,w);if(a===w)return console.error("QPageContainer needs to be child of QLayout"),w;_(I,!0);const o=r(()=>{const l={};return a.header.space===!0&&(l.paddingTop=`${a.header.size}px`),a.right.space===!0&&(l[`padding${v.lang.rtl===!0?"Left":"Right"}`]=`${a.right.size}px`),a.footer.space===!0&&(l.paddingBottom=`${a.footer.size}px`),a.left.space===!0&&(l[`padding${v.lang.rtl===!0?"Right":"Left"}`]=`${a.left.size}px`),l});return()=>f("div",{class:"q-page-container",style:o.value},N(z.default))}}),ee=B({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:z,emit:v}){const{proxy:{$q:a}}=O(),o=h(null),l=h(a.screen.height),u=h(t.container===!0?0:a.screen.width),b=h({position:0,direction:"down",inflectionPoint:0}),m=h(0),s=h(M.value===!0?0:P()),q=r(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),L=r(()=>t.container===!1?{minHeight:a.screen.height+"px"}:null),Q=r(()=>s.value!==0?{[a.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),c=r(()=>s.value!==0?{[a.lang.rtl===!0?"right":"left"]:0,[a.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function g(n){if(t.container===!0||document.qScrollPrevented!==!0){const i={position:n.position.top,direction:n.direction,directionChanged:n.directionChanged,inflectionPoint:n.inflectionPoint.top,delta:n.delta.top};b.value=i,t.onScroll!==void 0&&v("scroll",i)}}function C(n){const{height:i,width:y}=n;let $=!1;l.value!==i&&($=!0,l.value=i,t.onScrollHeight!==void 0&&v("scrollHeight",i),S()),u.value!==y&&($=!0,u.value=y),$===!0&&t.onResize!==void 0&&v("resize",n)}function H({height:n}){m.value!==n&&(m.value=n,S())}function S(){if(t.container===!0){const n=l.value>m.value?P():0;s.value!==n&&(s.value=n)}}let e;const d={instances:{},view:r(()=>t.view),isContainer:r(()=>t.container),rootRef:o,height:l,containerHeight:m,scrollbarWidth:s,totalWidth:r(()=>u.value+s.value),rows:r(()=>{const n=t.view.toLowerCase().split(" ");return{top:n[0].split(""),middle:n[1].split(""),bottom:n[2].split("")}}),header:x({size:0,offset:0,space:!1}),right:x({size:300,offset:0,space:!1}),footer:x({size:0,offset:0,space:!1}),left:x({size:300,offset:0,space:!1}),scroll:b,animate(){e!==void 0?clearTimeout(e):document.body.classList.add("q-body--layout-animate"),e=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),e=void 0},155)},update(n,i,y){d[n][i]=y}};if(_(F,d),P()>0){let y=function(){n=null,i.classList.remove("hide-scrollbar")},$=function(){if(n===null){if(i.scrollHeight>a.screen.height)return;i.classList.add("hide-scrollbar")}else clearTimeout(n);n=setTimeout(y,300)},R=function(T){n!==null&&T==="remove"&&(clearTimeout(n),y()),window[`${T}EventListener`]("resize",$)},n=null;const i=document.body;p(()=>t.container!==!0?"add":"remove",R),t.container!==!0&&R("add"),j(()=>{R("remove")})}return()=>{const n=U(z.default,[f(k,{onScroll:g}),f(V,{onResize:C})]),i=f("div",{class:q.value,style:L.value,ref:t.container===!0?void 0:o,tabindex:-1},n);return t.container===!0?f("div",{class:"q-layout-container overflow-hidden",ref:o},[f(V,{onResize:H}),f("div",{class:"absolute-full",style:Q.value},[f("div",{class:"scroll",style:c.value},[i])])]):i}}});export{ee as Q,Y as a,Z as b};
